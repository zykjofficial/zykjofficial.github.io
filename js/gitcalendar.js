"use strict";function _createForOfIteratorHelper(e,a){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||a&&e&&"number"==typeof e.length){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,d=!0,o=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return d=e.done,e},e:function(e){o=!0,r=e},f:function(){try{d||null==t.return||t.return()}finally{if(o)throw r}}}}function _unsupportedIterableToArray(e,a){if(e){if("string"==typeof e)return _arrayLikeToArray(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,a):void 0}}function _arrayLikeToArray(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}var calendar=new Vue({el:"#calendar",data:{simplemode:!0,user:"zykjofficial",fixed:"fixed",px:"px",x:"",y:"",span1:"",span2:"",month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthchange:[],oneyearbeforeday:"",thisday:"",amonthago:"",aweekago:"",weekdatacore:0,datacore:0,total:0,datadate:"",data:[],positionplusdata:[],firstweek:[],lastweek:[],beforeweek:[],thisweekdatacore:0,mounthbeforeday:0,mounthfirstindex:0,crispedges:"crispedges",thisdayindex:0,amonthagoindex:0,amonthagoweek:[],firstdate:[],first2date:[],montharrbefore:[],monthindex:0,purple:["#ebedf0","#fdcdec","#fc9bd9","#fa6ac5","#f838b2","#f5089f","#c4067e","#92055e","#540336","#48022f","#30021f"],green:["#ebedf0","#f0fff4","#dcffe4","#bef5cb","#85e89d","#34d058","#28a745","#22863a","#176f2c","#165c26","#144620"],blue:["#ebedf0","#f1f8ff","#dbedff","#c8e1ff","#79b8ff","#2188ff","#0366d6","#005cc5","#044289","#032f62","#05264c"],color:["#ebedf0","#fdcdec","#fc9bd9","#fa6ac5","#f838b2","#f5089f","#c4067e","#92055e","#540336","#48022f","#30021f"]},methods:{selectStyle:function(e,a){$(".angle-wrapper").show(),this.span1=e.date,this.span2=e.count,this.x=a.clientX-100,this.y=a.clientY-60},outStyle:function(){$(".angle-wrapper").hide()},thiscolor:function(e){if(0===e){var a=parseInt(e/2);return this.color[0]}if(e<2)return this.color[1];if(e<20){a=parseInt(e/2);return this.color[a]}return this.color[9]}}}),githubapiurl="https://githubapi.ryanchristian.dev/user/"+calendar.user;$(function(){$.ajax({type:"GET",url:githubapiurl,dataType:"json",success:function(e){function a(){var a=document.getElementById("gitcanvas"),e=document.getElementById("gitmessage"),t=a.getContext("2d");a.width=document.getElementById("calendarcanvasbox").offsetWidth;var n=.96*a.width/calendar.data.length;a.height=9*n;var r,l=.8*n,d={x:.02*a.width,y:.025*a.width};for(r in calendar.data){for(var o in weekdata=calendar.data[r],weekdata){var c={date:"",count:"",x:0,y:0};calendar.positionplusdata.push(c),t.fillStyle=calendar.thiscolor(weekdata[o].count),d.y=Math.round(100*d.y)/100,c.date=weekdata[o].date,c.count=weekdata[o].count,c.x=d.x,c.y=d.y,t.fillRect(d.x,d.y,l,l),d.y=d.y+n}d.y=.025*a.width,d.x=d.x+n}t.font="600  Arial",t.fillStyle="#aaa",t.fillText("日",0,1.9*n),t.fillText("二",0,3.9*n),t.fillText("四",0,5.9*n),t.fillText("六",0,7.9*n);var i,f=a.width/24;for(i in calendar.monthchange)t.fillText(calendar.monthchange[i],f,.7*n),f+=a.width/12;e.onmousemove=function(e){$(".angle-wrapper").hide()},a.onmousemove=function(e){$(".angle-wrapper").hide(),function(e,a){var t=e.getBoundingClientRect(),n=a.clientX-t.left*(e.width/t.width),r=a.clientY-t.top*(e.height/t.height),d=_createForOfIteratorHelper(calendar.positionplusdata);try{for(d.s();!(i=d.n()).done;){var o=i.value,c=n-o.x,i=r-o.y;0<c&&c<l&&0<i&&i<l&&($(".angle-wrapper").show(),calendar.span1=o.date,calendar.span2=o.count,calendar.x=a.clientX-100,calendar.y=a.clientY-60)}}catch(e){d.e(e)}finally{d.f()}}(a,e)}}function t(e){var a=_createForOfIteratorHelper(calendar.data[e]);try{for(a.s();!(t=a.n()).done;){var t=t.value;calendar.thisweekdatacore+=t.count}}catch(e){a.e(e)}finally{a.f()}}function n(){var a=_createForOfIteratorHelper(calendar.lastweek);try{for(a.s();!(e=a.n()).done;){var e=e.value;calendar.weekdatacore+=e.count}}catch(e){a.e(e)}finally{a.f()}}calendar.data=e.contributions,calendar.total=e.total,calendar.first2date=calendar.data[48],calendar.firstdate=calendar.data[47],calendar.firstweek=e.contributions[0],calendar.lastweek=e.contributions[52],calendar.beforeweek=e.contributions[51],calendar.thisdayindex=calendar.lastweek.length-1,calendar.thisday=calendar.lastweek[calendar.thisdayindex].date,calendar.oneyearbeforeday=calendar.firstweek[0].date,calendar.monthindex=+calendar.thisday.substring(5,7),calendar.montharrbefore=calendar.month.splice(calendar.monthindex,12-calendar.monthindex),calendar.monthchange=calendar.montharrbefore.concat(calendar.month),6===calendar.thisdayindex?(calendar.aweekago=calendar.lastweek[0].date,n()):(lastweek=e.contributions[51],calendar.aweekago=lastweek[calendar.thisdayindex+1].date,n(),function(){for(var e=calendar.thisdayindex;e<calendar.beforeweek.length;e++)calendar.weekdatacore+=calendar.beforeweek[e].count}()),0===calendar.thisdayindex?(t(52),t(51),t(50),t(49),t(48),calendar.thisweekdatacore+=calendar.firstdate[6].count,calendar.amonthago=calendar.firstdate[6].date):(t(52),t(51),t(50),t(49),function(){for(var e=calendar.thisdayindex-1;e<calendar.first2date.length;e++)calendar.thisweekdatacore+=calendar.first2date[e].count}(),calendar.amonthago=calendar.first2date[calendar.thisdayindex-1].date),a(),$(window).on("resize",a),window.onscroll=function(){$(".angle-wrapper").hide()}}})}),document.getElementById("calendarcanvasbox").offsetWidth<500&&(calendar.simplemode=!1);